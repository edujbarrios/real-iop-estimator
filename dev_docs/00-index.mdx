# Developer Documentation Index

## Overview

This documentation covers the technical implementation of the Real IOP Estimator project.

## Target Audience

- Developers wanting to understand the codebase
- Contributors looking to extend functionality
- Technical reviewers assessing the architecture
- Students learning about medical software development

## Documentation Structure

### [01. Architecture Overview](./01-architecture.mdx)
- Project structure
- Design principles
- Technology stack
- Core components
- Application lifecycle
- Error handling strategy

**Key topics**: Modular design, data flow, separation of concerns

### [02. Calculator Implementation](./02-calculator-implementation.mdx)
- IOPCalculator class structure
- Method delegation pattern
- Statistical utilities integration
- Type safety and performance
- Usage examples
- Testing considerations

**Key topics**: Class design, pure functions, delegation pattern

### [03. Statistical Methods](./03-statistical-methods.mdx)
- All 8 IOP calculation methods
- Mathematical formulas
- Implementation details
- NumPy optimizations
- Edge case handling
- Testing strategies

**Key topics**: Trimmed mean, median, trimean, IQM, winsorized, weighted mean

### [04. UI Implementation](./04-ui-implementation.mdx)
- Streamlit architecture
- Component design
- Layout strategies
- State management
- Error handling in UI
- Responsive design
- Accessibility features

**Key topics**: Streamlit components, centered layout, LaTeX rendering

### [05. Validation and Interpretation](./05-validation-and-interpretation.mdx)
- Input validation flow
- Clinical interpretation logic
- Confidence assessment
- Error message formatting
- Testing validation
- Future enhancements

**Key topics**: CSV parsing, clinical thresholds, variability assessment

## Quick Start for Developers

### Prerequisites

```bash
Python 3.8+
pip
```

### Setup

```bash
# Clone repository
git clone https://github.com/edujbarrios/real-iop-estimator.git
cd real-iop-estimator

# Install dependencies
pip install -r requirements.txt

# Run application
python app.py
```

### Project Structure at a Glance

```
IOP/
├── app.py              # Entry point
├── src/
│   ├── app_main.py     # Streamlit UI
│   ├── iop_calculator.py  # Core calculator
│   ├── *_iop.py        # Statistical methods
│   ├── validation.py   # Input validation
│   ├── interpretation.py  # Clinical logic
│   └── config.py       # Constants
└── dev_docs/           # This documentation
```

## Key Technologies

| Technology | Purpose | Version |
|------------|---------|---------|
| Python | Core language | 3.8+ |
| Streamlit | Web UI framework | Latest |
| NumPy | Numerical computing | Latest |
| Matplotlib | Visualization (deprecated) | Latest |

## Development Principles

### 1. **Modularity**
Each statistical method is a separate module for:
- Easy testing
- Clear responsibilities
- Simple extension

### 2. **Pure Functions**
Statistical calculations are pure functions:
- No side effects
- Predictable outputs
- Easily testable

### 3. **Type Hints**
All functions use type hints:
```python
def calculate_safe_iop(measurements: np.ndarray) -> float:
```

### 4. **Clinical Focus**
Code prioritizes:
- Medical accuracy
- User safety
- Clear communication

## Common Tasks

### Adding a New Statistical Method

1. Create `src/new_method_iop.py`:
```python
def calculate_new_method_iop(measurements: np.ndarray) -> float:
    # Implementation
    return round(result, 1)
```

2. Add to `IOPCalculator`:
```python
def calculate_new_method_iop(self) -> float:
    return calculate_new_method_iop(self.measurements)
```

3. Add to `calculate_all()`:
```python
return {
    # ... existing methods
    'new_method_iop': self.calculate_new_method_iop(),
}
```

4. Update UI in `app_main.py`:
```python
with st.expander("New Method - " + str(results['new_method_iop'])):
    # Display logic
```

### Running Tests

```python
# Unit tests (if implemented)
pytest tests/

# Manual testing
python -c "from src.iop_calculator import IOPCalculator; \
           calc = IOPCalculator([12, 14, 13, 15]); \
           print(calc.calculate_all())"
```

### Debugging

```python
# Enable Streamlit debug mode
streamlit run src/app_main.py --logger.level=debug

# Add print statements
print(f"DEBUG: measurements = {measurements}")
```

## Code Style

- **PEP 8** compliance
- **Type hints** on all public functions
- **Docstrings** in NumPy format
- **Comments** for complex logic
- **Constants** in UPPER_CASE

## Performance Guidelines

- Use NumPy operations (vectorized)
- Avoid unnecessary sorting
- Cache repeated calculations
- Profile before optimizing

## Security Considerations

- No user data persistence
- No external API calls
- Input validation on all inputs
- No file system access from user input
- Sandboxed calculations

## Contributing Guidelines

1. Fork the repository
2. Create feature branch
3. Add/update tests
4. Update documentation
5. Submit pull request

## License

Open source - see LICENSE file

## Contact

- Author: [edujbarrios](https://github.com/edujbarrios)
- Website: [edujbarrios.com](https://edujbarrios.com)

---

**Next Steps**: Start with [Architecture Overview](./01-architecture.mdx) for a high-level understanding, then dive into specific topics based on your interest.
